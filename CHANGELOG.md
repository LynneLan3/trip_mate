# 更新日志 (CHANGELOG)

## [v1.1.0] - 2026-02-17

### ✨ 新增功能

#### 🎯 问卷管理板块
- **新增导航栏问卷入口**: 与"首页、我的匹配、个人中心"平级，图标为📖
- **MyQuizzesPage (问卷管理页面)**:
  - **我已完成 Tab**: 显示所有做过的问卷
    - 答题得分和标签显示
    - 答题记录预览（显示前3道题）
    - 点击查看详细结果页面
  - **我创建的 Tab**: 显示自己创建的问卷
    - 公开/私密状态标识
    - 题目数量显示
    - 编辑按钮（跳转到编辑页面）

#### 📝 问卷编辑功能
- **EditQuizPage (编辑问卷页面)**:
  - 加载现有问卷内容进行编辑
  - 支持增删题目（最多10道）和选项（最多6个）
  - 隐私/公开设置切换
  - 权限校验（只有创建者可编辑）
  - 保存后自动跳转到问卷管理页面

#### 🔒 隐私控制
- **创建问卷时添加隐私设置**:
  - 默认私密（只能通过邀请链接参与）
  - 开关切换为公开（显示在首页问卷池）
  - 清晰的开关UI和说明文字

#### 🏠 首页优化
- **公开问卷过滤**: 首页只显示公开问卷
- **兼容旧数据**: 旧问卷自动设为公开状态
- **按钮优化**: 首页创建问卷按钮改为跳转到问卷管理页面

### 🛠️ 技术改进

#### 数据库更新
- **新增字段**:
  - `quizzes.is_public`: BOOLEAN，控制问卷公开状态
  - `quizzes.creator_id`: UUID，关联创建者
- **RLS策略**: 添加创建者权限控制策略
- **索引优化**: 为新字段添加查询索引

#### 类型系统
- **数据库类型更新**: 更新 `database.types.ts`
- **TypeScript修复**: 修复Supabase类型推断问题
- **类型安全**: 所有新组件都使用正确的类型定义

#### 代码质量
- **构建优化**: 修复TypeScript构建错误
- **代码分割**: 合理组织文件结构
- **性能优化**: 添加适当的React优化

### 📄 文档和工具
- **测试文档**: 完整的测试指南和预期结果
- **数据库脚本**: `添加问卷隐私字段.sql` 自动配置数据库
- **验证脚本**: `验证数据库.sql` 检查字段正确性
- **部署脚本**: 各种验证和部署辅助脚本

### 🔧 依赖和配置
- **环境变量**: 更新 `.env` 配置
- **构建配置**: 优化 `vercel.json` 部署配置
- **Git忽略**: 更新 `.gitignore` 排除不必要的文件

---

## [v1.0.0] - 2026-02-17

### 🎯 初始版本
- 基础的旅行问卷匹配应用
- 用户认证和个人资料管理
- 问卷答题和结果展示
- 匹配系统和联系方式分享
- 精美的UI设计和响应式布局

---

## 📝 版本命名规范

- **主版本号**: 大功能更新或架构变化
- **次版本号**: 新功能添加
- **修订号**: 修复和优化

## 🚀 部署说明

1. **数据库更新**: 在Supabase SQL Editor中执行 `添加问卷隐私字段.sql`
2. **环境变量**: 确保 `.env` 文件配置正确
3. **构建测试**: 运行 `npm run build` 验证构建
4. **部署**: 推送到生产环境

## 📞 支持

如果遇到问题，请查看测试指南或提交Issue。