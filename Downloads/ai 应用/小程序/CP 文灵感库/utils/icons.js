// 生成 Base64 格式的图标
const generateIcon = (type, isActive = false) => {
  const color = isActive ? '#007aff' : '#8e8e93';
  const icons = {
    edit: `<svg t="1710504444444" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4449" width="32" height="32"><path d="M862.709333 116.042667a128 128 0 0 1 0 181.013333L455.04 704.725333a149.333333 149.333333 0 0 1-61.312 35.157334l-167.253333 50.176a42.666667 42.666667 0 0 1-53.802667-53.802667l50.176-167.253333a149.333333 149.333333 0 0 1 35.157333-61.312l407.669334-407.669334a128 128 0 0 1 181.013333 0l16.021333 16.021334zM778.666667 167.104a42.666667 42.666667 0 0 0-56.32-3.84l-3.029334 2.773333L311.466667 573.866667a64 64 0 0 0-15.082667 26.282666l-37.973333 126.549334 126.549333-37.973334a64 64 0 0 0 26.282667-15.082666l407.850666-407.850667a42.666667 42.666667 0 0 0 3.84-56.32l-2.773333-3.029333-41.493333-41.493334z" fill="${color}" p-id="4450"></path></svg>`,
    list: `<svg t="1710504493563" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5574" width="32" height="32"><path d="M128 256h768v64H128z m0 224h768v64H128z m0 224h768v64H128z" fill="${color}" p-id="5575"></path></svg>`,
    user: `<svg t="1710504519508" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6699" width="32" height="32"><path d="M512 128a149.333333 149.333333 0 0 1 149.333333 149.333333v74.666667a149.333333 149.333333 0 0 1-298.666666 0V277.333333a149.333333 149.333333 0 0 1 149.333333-149.333333z m0 64a85.333333 85.333333 0 0 0-85.333333 85.333333v74.666667a85.333333 85.333333 0 0 0 170.666666 0V277.333333a85.333333 85.333333 0 0 0-85.333333-85.333333z m0 384c159.061333 0 298.666667 72.277333 298.666667 165.973333V874.666667a42.666667 42.666667 0 0 1-42.666667 42.666666H256a42.666667 42.666667 0 0 1-42.666667-42.666666v-132.693334C213.333333 648.277333 352.938667 576 512 576z m0 64c-113.770667 0-234.666667 47.957333-234.666667 101.973333V853.333333h469.333334v-111.36C746.666667 687.957333 625.770667 640 512 640z" fill="${color}" p-id="6700"></path></svg>`
  };

  return icons[type] || '';
};

// 将 SVG 转换为 Base64 格式
const svgToBase64 = (svg) => {
  return `data:image/svg+xml;base64,${wx.arrayBufferToBase64(new Uint8Array([...svg].map(c => c.charCodeAt(0))))}`;
};

// 获取图标路径
const getIconPath = (type, isActive = false) => {
  const svg = generateIcon(type, isActive);
  return svgToBase64(svg);
};

module.exports = {
  getIconPath
};
